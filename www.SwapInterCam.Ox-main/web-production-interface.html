<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SwapInterCam Production Web Interface</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: #1a1a1a; color: white; }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 20px; }
        .header h1 { font-size: 2.5rem; text-align: center; }
        .status-bar { background: #333; padding: 15px; display: flex; justify-content: space-between; }
        .status-item { display: flex; align-items: center; gap: 10px; }
        .status-dot { width: 10px; height: 10px; border-radius: 50%; background: #4CAF50; }
        .container { max-width: 1400px; margin: 0 auto; padding: 30px; }
        .feature-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); gap: 25px; }
        .feature-card { background: rgba(102, 126, 234, 0.1); padding: 30px; border-radius: 12px; border: 1px solid rgba(102, 126, 234, 0.2); cursor: pointer; transition: all 0.3s ease; }
        .feature-card:hover { background: rgba(102, 126, 234, 0.2); transform: translateY(-3px); }
        .feature-icon { font-size: 3rem; margin-bottom: 15px; }
        .feature-title { font-size: 1.4rem; font-weight: 600; margin-bottom: 10px; color: #667eea; }
        .feature-description { font-size: 1rem; opacity: 0.9; line-height: 1.6; }
        .api-status { background: #2a2a2a; padding: 20px; border-radius: 8px; margin: 20px 0; }
        .api-endpoint { display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid #444; }
        .endpoint-status { padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; }
        .status-ok { background: #4CAF50; color: white; }
        .status-error { background: #f44336; color: white; }
        .realtime-updates { background: #333; padding: 15px; border-radius: 8px; margin: 20px 0; max-height: 200px; overflow-y: auto; }
    </style>
</head>
<body>
    <div class="header">
        <h1>🎭 SwapInterCam Production Web Interface</h1>
        <p style="text-align: center; margin-top: 10px; opacity: 0.9;">MCP Server Integration • Real-time Updates • Production Ready</p>
    </div>

    <div class="status-bar">
        <div class="status-item"><span class="status-dot"></span><span id="mcp-status">MCP Server: Checking...</span></div>
        <div class="status-item"><span class="status-dot"></span><span id="swep-status">SWEP Server: Checking...</span></div>
        <div class="status-item"><span class="status-dot"></span><span id="websocket-status">WebSocket: Connecting...</span></div>
    </div>

    <div class="container">
        <div class="feature-grid">
            <div class="feature-card" onclick="openFaceSwapStudio()">
                <div class="feature-icon">🎭</div>
                <div class="feature-title">Face Swap Studio</div>
                <div class="feature-description">Professional AI-powered face swapping with real-time processing, drag-and-drop interface, and export capabilities.</div>
            </div>

            <div class="feature-card" onclick="openChatIntegration()">
                <div class="feature-icon">💬</div>
                <div class="feature-title">Multi-Platform Chat Hub</div>
                <div class="feature-description">Unified interface for WhatsApp Web, Facebook Messenger, and LINE with session management and real-time sync.</div>
            </div>

            <div class="feature-card" onclick="openSystemMonitoring()">
                <div class="feature-icon">📊</div>
                <div class="feature-title">System Monitoring Dashboard</div>
                <div class="feature-description">Real-time system health, performance metrics, issue detection, and automated recovery status monitoring.</div>
            </div>

            <div class="feature-card" onclick="openCameraControls()">
                <div class="feature-icon">📹</div>
                <div class="feature-title">Camera Management</div>
                <div class="feature-description">Professional camera detection, configuration, and real-time preview with OBS virtual camera integration.</div>
            </div>

            <div class="feature-card" onclick="openActionCenter()">
                <div class="feature-icon">⚡</div>
                <div class="feature-title">Action Execution Center</div>
                <div class="feature-description">Execute system actions, recovery operations, and automated fixes with real-time feedback and history tracking.</div>
            </div>

            <div class="feature-card" onclick="openAPIExplorer()">
                <div class="feature-icon">🔌</div>
                <div class="feature-title">MCP API Explorer</div>
                <div class="feature-description">Interactive API explorer for all 25+ MCP endpoints with real-time testing and documentation.</div>
            </div>
        </div>

        <div class="api-status">
            <h3>🔌 MCP Server API Status</h3>
            <div id="api-endpoints">Loading API endpoints...</div>
        </div>

        <div class="realtime-updates">
            <h3>📡 Real-time System Updates</h3>
            <div id="realtime-log">Connecting to WebSocket...</div>
        </div>
    </div>

    <script>
        console.log('🌐 SwapInterCam Production Web Interface Loading...');

        // WebSocket connection for real-time updates
        const ws = new WebSocket('ws://localhost:3000');
        const realtimeLog = document.getElementById('realtime-log');

        ws.onopen = () => {
            document.getElementById('websocket-status').textContent = 'WebSocket: Connected';
            addRealtimeUpdate('✅ WebSocket connected to MCP server');
        };

        ws.onmessage = (event) => {
            const data = JSON.parse(event.data);
            if (data.type === 'state-update') {
                addRealtimeUpdate(`📊 State updated: ${data.changes ? data.changes.length : 0} changes`);
            }
        };

        function addRealtimeUpdate(message) {
            const timestamp = new Date().toLocaleTimeString();
            realtimeLog.innerHTML = `[${timestamp}] ${message}<br>` + realtimeLog.innerHTML;
        }

        // Check MCP Server status
        async function checkMCPStatus() {
            try {
                const response = await fetch('/api/health');
                if (response.ok) {
                    document.getElementById('mcp-status').textContent = 'MCP Server: Connected';
                    loadAPIEndpoints();
                }
            } catch (error) {
                document.getElementById('mcp-status').textContent = 'MCP Server: Offline';
            }
        }

        // Load API endpoints status
        async function loadAPIEndpoints() {
            const endpoints = [
                '/api/state', '/api/statistics', '/api/health', '/api/actions',
                '/api/issues', '/api/monitoring/dashboard', '/api/recovery/status'
            ];
            let html = '';
            for (const endpoint of endpoints) {
                try {
                    const response = await fetch(endpoint);
                    const status = response.ok ? 'OK' : 'ERROR';
                    const statusClass = response.ok ? 'status-ok' : 'status-error';
                    html += `<div class="api-endpoint"><span>${endpoint}</span><span class="endpoint-status ${statusClass}">${status}</span></div>`;
                } catch (error) {
                    html += `<div class="api-endpoint"><span>${endpoint}</span><span class="endpoint-status status-error">ERROR</span></div>`;
                }
            }
            document.getElementById('api-endpoints').innerHTML = html;
        }

        // Feature functions
        function openFaceSwapStudio() { window.open('/face-swap', '_blank'); }
        function openChatIntegration() { window.open('/chat', '_blank'); return; alert('💬 Chat Integration Hub\n\nOpening multi-platform chat interface...'); }
        function openSystemMonitoring() { window.open('/monitoring', '_blank'); }
        function openCameraControls() { alert('📹 Camera Management\n\nOpening camera controls...'); }
        function openActionCenter() { alert('⚡ Action Execution Center\n\nOpening action center...'); }
        function openAPIExplorer() { alert('🔌 MCP API Explorer\n\nOpening API explorer...'); }

        // Initialize
        checkMCPStatus();
        setInterval(checkMCPStatus, 30000);

        console.log('✅ SwapInterCam Production Web Interface Ready!');
    </script>
</body>
</html>
